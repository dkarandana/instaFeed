!function(a){"use strict";function b(a){return(a||"").toLowerCase()}a.fn.instaFeed=function(c){var d;return 0!==this.length||a.isReady?this.each(function(){var d,e,f,g,h=a(this),i=a.fn.instaFeed.log;h.data("instafeed-log")===!1||c&&c.log===!1||e&&e.log===!1,i("--initialized--"),d=h.data();for(var j in d)d.hasOwnProperty(j)&&/^instafeed[A-Z]+/.test(j)&&(g=d[j],f=j.match(/^instafeed(.*)/)[1].replace(/^[A-Z]/,b),i(f+":",g,"("+typeof g+")"),d[f]=g);e=a.extend({},a.fn.instaFeed.defaults,d,c||{}),e.API=a.extend({_container:h},a.fn.instaFeed.API),e.API.log=i,h.data("instaFeed.opts",e),h.data("instaFeed.API",e.API),/\S/.test(e.profile)&&e.API.loadImages(h,e)}):(d={s:this.selector,c:this.context},a.fn.instaFeed.log("(dom not ready)"),a(function(){a(d.s,d.c).instaFeed(c)}),this)},a.fn.instaFeed.API={opts:function(){return this._container.data("instaFeed.opts")},template:function(b,c){var d=new RegExp(c.templateRegex||a.fn.instaFeed.defaults.templateRegex,"g"),e=a.makeArray(arguments);return e.shift(),b.replace(d,function(b,c){var d,f,g,h,i=c.split(".");for(d=0;d<e.length;d++)if(g=e[d]){if(i.length>1)for(h=g,f=0;f<i.length;f++)g=h,h=h[i[f]]||c;else h=g[c];if(a.isFunction(h))return h.apply(g,e);if(void 0!==h&&null!==h&&h!=c)return h}return c})},loadImages:function(b){var c=this.opts();c.API.log("requesting images from",c.profile),a.ajax({url:c.apiURL+c.endpoint,dataType:"jsonp",type:"GET",data:{access_token:c.token,count:c.maxphotos},success:function(a){c.API.log(c);var f,d=b,e=1;if(d.length>0){for(var g in a.data)"object"==typeof a.data[g]&&(f=c.API.template(c.template,{parentCls:c.parentclass,num:e++,lowResolutionURL:a.data[g].images.low_resolution.url},c),d.append(f));if("number"==typeof c.wrap&&c.wrap>0){var h=d.find("."+c.parentclass);console.log(h);for(var i=0;i<h.length;i+=c.wrap)h.slice(i,i+c.wrap).wrapAll("<div class='wrap wrap_"+(i+1)+"'></div>")}}},error:function(a){console.log(a)}})}},a.fn.instaFeed.log=function(){window.console&&console.log&&console.log("[instaFeed] "+Array.prototype.join.call(arguments," "))},a.fn.instaFeed.defaults={apiURL:"https://api.instagram.com/v1",autoSelector:".instafeed[data-instafeed-profile]",endPoint:"/users/self/media/recent",maxPhotos:20,wrap:0,sync:!0,log:!0,parentClass:"insta",template:'<div class="{{parentCls}}" style="background-image:url({{lowResolutionURL}})"></div>',templateRegex:"{{((.)?.*?)}}"},a(document).ready(function(){a(a.fn.instaFeed.defaults.autoSelector).instaFeed()})}(jQuery);
